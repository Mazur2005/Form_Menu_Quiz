import"./modulepreload-polyfill-ec808ebb.js";import{A as N}from"./fetch_API_Weather-639828d2.js";const r={THE_NAME_MUST_CONTAIN_AT_LEAST_3_LETTERS:"Must contain at least 3 letters",FORBIDDEN_SPECIAL_CHARACTERS:"Forbidden special characters",PASSWORD_IS_TOO_SHORT:"Minimum 8 characters",SPECIAL_CHARACTERS:"Use special character",ENTER_THE_NUMBER:"Enter the number",PASSWORD_ARE_NOT_THE_SAME:"Passwords aren't the same",INVALID_EMAIL:"Invalid email",INCORRECT_CITY_NAME:"Incorrect city name"},d={CHECKING_NUMBER:/(?=.*[0-9])/,CHECKING_SPECIAL_CHARACTER:/(?=.*[!@#\$%\^&\*])/,CHECKING_EMAIL:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/},S={BAD_REQUEST:400,NOT_FOUND:404},v=document.querySelectorAll(".style-input-information"),f=document.querySelector(".problem-with-server-or-code"),k=document.querySelectorAll(".fa-check"),O=document.querySelectorAll(".fa-x"),P=document.querySelector(".go-next-btn"),L=document.querySelector(".clear-form-btn"),H=2,M=8,E="name",i="password",A="comparingPassword",p="city",_="email",s={},o={},n={},a={},l={},w=()=>location.href="../../Menu/menu.html",m=(e,t,y,R,b)=>{e.valueInput=document.querySelector(t),e.errorName=document.querySelector(y),e.iconCheck=document.querySelector(R),e.iconX=document.querySelector(b),e.InputIsCorrect=!1};m(s,"#username",".error-name",".icon-user-name-correct",".icon-user-name-incorrect");m(o,"#password",".error-password",".icon-password-correct",".icon-password-incorrect");m(n,"#password2",".error-password2",".icon-password2-correct",".icon-password2-incorrect");m(a,"#city",".error-city",".icon-city-correct",".icon-city-incorrect");m(l,"#email",".error-email",".icon-email-correct",".icon-email-incorrect");const g=[s.errorName,o.errorName,n.errorName,a.errorName,l.errorName],u=e=>{e.valueInput.classList.remove("underline"),e.errorName.style.visibility="hidden",e.errorName.textContent="",e.iconCheck.style.visibility="visible",e.iconX.style.visibility="hidden",e.InputIsCorrect=!0,h()},I=(e,t)=>{e.valueInput.classList.add("underline"),e.errorName.style.visibility="visible",e.errorName.textContent=t,e.iconCheck.style.visibility="hidden",e.iconX.style.visibility="visible",e.InputIsCorrect=!1},C=e=>{switch(e){case E:u(s);break;case i:u(o);break;case A:u(n);break;case p:u(a);break;case _:u(l);break}},c=(e,t)=>{switch(e){case E:I(s,t);break;case i:I(o,t);break;case A:I(n,t);break;case p:I(a,t);break;case _:I(l,t);break}},D=()=>{d.CHECKING_SPECIAL_CHARACTER.test(s.valueInput.value)?c(E,r.FORBIDDEN_SPECIAL_CHARACTERS):s.valueInput.value.length>H?C(E):c(E,r.THE_NAME_MUST_CONTAIN_AT_LEAST_3_LETTERS)},U=()=>{o.valueInput.value.length>=M?d.CHECKING_SPECIAL_CHARACTER.test(o.valueInput.value)?d.CHECKING_NUMBER.test(o.valueInput.value)?C(i):c(i,r.ENTER_THE_NUMBER):c(i,r.SPECIAL_CHARACTERS):c(i,r.PASSWORD_IS_TOO_SHORT)},q=()=>{n.valueInput.value===password.value&&n.valueInput.value.length>0?C(A):c(A,r.PASSWORD_ARE_NOT_THE_SAME)},B=()=>{const e=N.API_LINK+a.valueInput.value+N.API_KEY+N.API_UNITS;axios.get(e).then(t=>{W(t.data.name),C(p),localStorage.setItem("problemWithCodeOrServer",!1)}).catch(t=>{if(t.response.status===S.BAD_REQUEST||t.response.status===S.NOT_FOUND)return c(p,r.INCORRECT_CITY_NAME)}).catch(()=>{localStorage.setItem("problemWithCodeOrServer",!0),a.InputIsCorrect=!0,h(),f.style.display="none"})},G=e=>e.charAt(0).toUpperCase()+e.slice(1),K=()=>{const e=G(s.valueInput.value);F(e)},F=e=>{localStorage.setItem("nickName",`Hello ${e}`)},W=e=>{localStorage.setItem("city",e)},z=()=>{d.CHECKING_EMAIL.test(l.valueInput.value)?C(_):c(_,r.INVALID_EMAIL)},h=()=>{s.InputIsCorrect&&o.InputIsCorrect&&n.InputIsCorrect&&a.InputIsCorrect&&l.InputIsCorrect&&(K(),w())},Z=e=>{e.preventDefault(),k.forEach(t=>t.style.visibility="hidden"),O.forEach(t=>t.style.visibility="hidden"),g.forEach(t=>t.style.visibility="hidden"),v.forEach(t=>{t.value="",t.classList.remove("underline")})},T=e=>{e.preventDefault(),D(),U(),q(),B(),z()};L.addEventListener("click",Z);P.addEventListener("click",e=>{T(e)});v.forEach(e=>e.addEventListener("keypress",t=>{t.key==="Enter"&&T(t)}));
